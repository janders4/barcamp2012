// Generated by CoffeeScript 1.3.3
(function() {
  var registerLink, rnd, snitchCss;

  registerLink = "http://barcampnola5.eventbrite.com/";

  snitchCss = {
    position: 'absolute',
    'z-index': 100
  };

  rnd = function(max, min) {
    if (min == null) {
      min = 0;
    }
    return Math.floor(((max - min) * Math.random()) + min);
  };

  window.createSnitch = function() {
    var animate, snitch;
    snitch = $("<a href=\"" + registerLink + "\" target=_blank>").append($('<img src="img/snitch.png" class="registration-snitch" />').css({
      width: '100px',
      height: '33px'
    })).css(snitchCss).css({
      top: rnd($(window).height())
    }).appendTo('body').click(function() {
      return $(this).remove();
    });
    animate = function() {
      var newLeft, newTop, pos, win;
      if (!snitch.parents('body')[0]) {
        return;
      }
      win = {
        top: $(window).scrollTop(),
        left: $(window).width()
      };
      pos = snitch.position();
      newLeft = pos.left + (rnd(200, -200));
      if (newLeft < 0) {
        newLeft = 0;
      }
      if (newLeft > win.left - snitch.width()) {
        newLeft = win.left - snitch.width();
      }
      newTop = pos.top + (rnd(200, -200));
      if (newTop < 0) {
        newTop = 0;
      }
      if (newTop > ($(document).height() - snitch.height())) {
        newTop = $(document).height() - snitch.height();
      }
      return snitch.animate({
        left: newLeft,
        top: newTop
      }, {
        duration: rnd(1000),
        complete: !window.createSnitch.pause && animate
      });
    };
    animate();
    return snitch;
  };

  $(function() {
    var schedule, t;
    t = 5000;
    return setTimeout((schedule = function() {
      createSnitch();
      t *= 4;
      return setTimeout(schedule, t);
    }), t);
  });

}).call(this);
